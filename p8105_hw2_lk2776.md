p8105_hw2_lk2776
================
2024-09-30

``` r
#load packages; print 3 lines of tibble output
library(tidyverse)
```

## problem1:

``` r
#read data using read_csv() from tidyverse
nyc_data = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
                    na=c("NA",".",""), 
                    col_names = TRUE, 
                    col_types = cols(
                      Route8=col_character(),
                      Route9=col_character(), 
                      Route10=col_character(),
                      Route11=col_character())) |>
  #clean column names
  janitor::clean_names() |> 
  #select columns 
  select(line,station_name,station_latitude,station_longitude,
         entry,vending,entrance_type,ada,
         route1,route2,route3,route4,route5,
         route6,route7,route8,route9,route10,route11
         ) |> 
  #convert entry column from character to logical vector
  mutate(entry=if_else(entry %in%"YES",TRUE,FALSE))

#check class of columns of dataset to verify entry varible class
nyc_data |> sapply(class)
```

    ##              line      station_name  station_latitude station_longitude 
    ##       "character"       "character"         "numeric"         "numeric" 
    ##             entry           vending     entrance_type               ada 
    ##         "logical"       "character"       "character"         "logical" 
    ##            route1            route2            route3            route4 
    ##       "character"       "character"       "character"       "character" 
    ##            route5            route6            route7            route8 
    ##       "character"       "character"       "character"       "character" 
    ##            route9           route10           route11 
    ##       "character"       "character"       "character"

The cleaned NYC dataset contains line, station_name, station_latitude,
station_longitude, routes1-11, entry, vending, entrance_type, ada
variables. The cleaning process involved reading the data with missing
value using na(), reading the columns route8-11 as character columns
using col_types(), cleaning the column names using
janitor::clean_names(), selecting the desired columns using select(),
and converting entry variable using mutate() and ifelse() functions. The
resulting dataset has no. of. rows and columns: **\[1,868 x 19\]** . The
data is not tidy because routes1-11 can be put together in two columns:
route_name and route_value.

- number of distinct stations in the dataset. :**465**

- number of stations are ada compliant. **468**

- ~38% proportion of stations with vending allow entrance

- 91 distinct stations serve the A train after data is reformatted so
  that route number and name are distinct variables.

- of the 91 distinct stations that serve the A train, only 34 stations
  are ADA compliant.

``` r
#proportion of stations with entry but with out vending
#table(nyc_data$vending) #183 NO
nyc_data |> select(entry, vending) |> 
  filter(vending %in% "NO") |>
  table()
```

    ##        vending
    ## entry    NO
    ##   FALSE 114
    ##   TRUE   69

``` r
69/183
```

    ## [1] 0.3770492

``` r
#number of distinct stations with route "A"
nyc_data |> pivot_longer(
  route1:route11, 
  names_to="route_number",
  values_to="route_name"
) |>
  filter(route_name == "A") |> 
  unite("line_station_name", line:station_name) |> 
  n_distinct()
```

    ## [1] 91

``` r
#number of distinct stations with route "A" and ada compliant
nyc_data |> pivot_longer(
  route1:route11, 
  names_to="route_number",
  values_to="route_name"
) |>
  filter(route_name == "A") |> 
  filter(ada=="TRUE") |> 
unite("line_station_name", line:station_name) |> 
  n_distinct()
```

    ## [1] 34
