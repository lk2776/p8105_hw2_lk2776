---
title: "p8105_hw2_lk2776"
output: github_document
date: "2024-09-30"
---
## hw2

```{r setup, warning=FALSE, message=FALSE}
#load packages; print 3 lines of tibble output
library(tidyverse)
options(tibble.print_min=5)
```

problem1:

The cleaned NYC dataset contains line, station_name, station_latitude, station_longitude, routes1-11, entry, vending, entrance_type, ada variables. The cleaning process involved reading the data with missing value using na(), cleaning the column names using janitor::clean_names(), selecting the desired columns using select(), and converting entry variable using mutate() and ifelse() functions. The resulting dataset has 19 columns and 1868 rows. The data is not tidy because routes1-11 can be put together in two columns: route_name and route_value. 

- 465 distinct stations in the dataset. 
- 468 stations are ada compliant.
- ~38% of stations with vending allow entrance.


```{r study data}
#read data using read_csv() from tidyverse
nyc_data = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
                    na=c("NA",".",""), 
                    col_names=TRUE) |>
  #clean column names
  janitor::clean_names() |> 
  #select columns 
  select(line,station_name,station_latitude,station_longitude,
         entry,vending,entrance_type,ada,
         route1,route2,route3,route4,route5,
         route6,route7,route8,route9,route10,route11
         ) |> 
  #convert entry column from character to logical vector
  mutate(entry=if_else(entry %in%"YES",TRUE,FALSE))

#check class of columns of dataset to verify entry varible class
nyc_data |> sapply(class)

#check dimensions of dataset
dim_desc(nyc_data)

```

```{r answering specific questions}
#number of distinct line_station_names
nyc_data |> select(line,station_name)  |>
  unite("line_station_name", line:station_name) |> 
 n_distinct() 
   
#number of stations that are ada compliant
table(nyc_data$ada)

#proportion of stations with entry but with out vending
#table(nyc_data$vending) #183 NO
nyc_data |> select(entry, vending) |> 
  filter(vending %in% "NO") |>
  table()
69/183
  
```

